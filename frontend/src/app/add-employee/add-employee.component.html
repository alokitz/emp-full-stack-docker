<div class="container py-5">
  <div class="col-md-8 offset-md-2">
    <div class="card shadow-lg border-0 rounded-4">
      <div class="card-header bg-dark text-white text-center py-3 rounded-top-4">
        <h4><i class="bi bi-person-plus"></i> Add New Employee</h4>
      </div>

      <div class="card-body bg-light p-4">
        <form #f="ngForm" (ngSubmit)="f.form.valid && onSubmit()" novalidate>
          <div class="row g-3">

            <!-- First Name -->
            <div class="col-md-6">
              <label for="fname" class="form-label fw-bold">First Name</label>
              <input type="text" class="form-control" id="fname" [(ngModel)]="employee.fname" name="fname" required
                minlength="3" #fname="ngModel" [ngClass]="{ 'is-invalid': f.submitted && fname.errors }" />
              <div *ngIf="f.submitted && fname.errors" class="invalid-feedback">
                <div *ngIf="fname.errors['required']">First name is required</div>
                <div *ngIf="fname.errors['minlength']">At least 3 characters required</div>
              </div>
            </div>

            <!-- Last Name -->
            <div class="col-md-6">
              <label for="lname" class="form-label fw-bold">Last Name</label>
              <input type="text" class="form-control" id="lname" [(ngModel)]="employee.lname" name="lname" required
                #lname="ngModel" [ngClass]="{ 'is-invalid': f.submitted && lname.errors }" />
              <div *ngIf="f.submitted && lname.errors" class="invalid-feedback">
                <div *ngIf="lname.errors['required']">Last name is required</div>
              </div>
            </div>

            <!-- Email -->
            <div class="col-md-6">
              <label for="email" class="form-label fw-bold">Email</label>
              <input type="email" class="form-control" id="email" [(ngModel)]="employee.email" name="email" required
                email #email="ngModel" [ngClass]="{ 'is-invalid': f.submitted && email.invalid }" />
              <div *ngIf="f.submitted && email.errors" class="invalid-feedback">
                <div *ngIf="email.errors['required']">Email is required</div>
                <div *ngIf="email.invalid">Invalid email format</div>
              </div>
            </div>

            <!-- Department -->
            <div class="col-md-6">
              <label for="department" class="form-label fw-bold">Department</label>
              <select id="department" class="form-select" [(ngModel)]="employee.department" name="department" required
                #department="ngModel" [ngClass]="{ 'is-invalid': f.submitted && department.errors }">
                <option value="" disabled selected>Choose...</option>
                <option>IT</option>
                <option>HR</option>
                <option>Finance</option>
                <option>Marketing</option>
              </select>
              <div *ngIf="f.submitted && department.errors" class="invalid-feedback">
                Department is required
              </div>
            </div>

            <!-- Designation -->
            <div class="col-md-6">
              <label for="designation" class="form-label fw-bold">Designation</label>
              <select id="designation" class="form-select" [(ngModel)]="employee.designation" name="designation"
                required #designation="ngModel" [ngClass]="{ 'is-invalid': f.submitted && designation.errors }">
                <option value="" disabled selected>Choose...</option>
                <option>Developer</option>
                <option>Manager</option>
                <option>Analyst</option>
                <option>Accountant</option>
                <option>System Analyst</option>
              </select>
              <div *ngIf="f.submitted && designation.errors" class="invalid-feedback">
                Designation is required
              </div>
            </div>

            <!-- Salary -->
            <div class="col-md-6">
              <label for="salary" class="form-label fw-bold">Salary</label>
              <input type="text" class="form-control" id="salary" [(ngModel)]="employee.salary" name="salary" required
                pattern="^[1-9]\d{2,}$" #salary="ngModel" [ngClass]="{ 'is-invalid': f.submitted && salary.errors }" />
              <div *ngIf="f.submitted && salary.errors" class="invalid-feedback">
                <div *ngIf="salary.errors['required']">Salary is required</div>
                <div *ngIf="salary.invalid">Must be numeric & at least 3 digits</div>
              </div>
            </div>

            <!-- Joining Date -->
            <div class="col-md-6">
              <label for="joiningDate" class="form-label fw-bold">Joining Date</label>
              <input type="date" class="form-control" id="joiningDate" [(ngModel)]="employee.joiningDate"
                name="joiningDate" required #joiningDate="ngModel"
                [ngClass]="{ 'is-invalid': f.submitted && joiningDate.errors }" />
              <div *ngIf="f.submitted && joiningDate.errors" class="invalid-feedback">
                Joining Date is required
              </div>
            </div>

            <!-- Profile Photo Upload -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Upload Profile Photo</label>
              <input type="file" (change)="onPhotoSelected($event)" accept="image/*" class="form-control" />
            </div>

            <!-- Resume Upload -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Upload Resume (PDF)</label>
              <input type="file" (change)="onResumeSelected($event)" accept="application/pdf" class="form-control" />
            </div>

            <!-- ðŸ”¹ Job Selection Dropdown -->
<div class="col-md-6">
  <label for="jobId" class="form-label fw-bold">Select Job (As Per Resume)</label>
  <select id="jobId" class="form-select" [(ngModel)]="jobId" name="jobId">
    <option [ngValue]="undefined">-- Select a Job --</option>
    <option *ngFor="let j of jobs" [ngValue]="j.id">
      {{ j.title }} (ID: {{ j.id }})
    </option>
  </select>
  <div class="form-text">
  </div>
</div>



            <!-- Buttons -->
            <div class="d-flex justify-content-between mt-4">
              <button class="btn btn-success px-4" type="submit">
                <i class="bi bi-check-circle"></i> Submit
              </button>

              <button type="button" (click)="goToEmployeeList()" class="btn btn-danger px-4">
                <i class="bi bi-x-circle"></i> Cancel
              </button>
            </div>
          </div>
        </form>
      </div>

      <div class="card-footer text-center text-muted small bg-dark text-white rounded-bottom-4 py-2">
        <i class="bi bi-info-circle"></i> Please ensure all fields are correctly filled before submitting.
      </div>
    </div>
  </div>
</div>
